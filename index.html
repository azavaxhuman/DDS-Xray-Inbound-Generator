<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DDS Xray Inbound Generator</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Vazir:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="./vue.global.js"></script>
    <script src="./style.js"></script>
    <style>
      /* استایل‌های اضافی برای بهبود UI */
      body {
        background: linear-gradient(135deg, #1f2937, #111827);
        font-family: "Inter", sans-serif;
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      input,
      select {
        transition: all 0.2s ease;
      }
      input:focus,
      select:focus {
        box-shadow: 0 0 0 2px rgba(147, 51, 234, 0.5);
      }
      pre {
        white-space: pre-wrap;
        word-wrap: break-word;
        font-family: "Fira Code", monospace;
      }
      .font-vazir {
        font-family: "Vazir", sans-serif;
      }
    </style>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Fira+Code&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="min-h-screen text-gray-200">
    <div id="app" class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
      <!-- هدر -->
      <header class="text-center mb-10 fade-in">
        <h1 class="text-4xl font-bold text-purple-400 tracking-tight">
          DDS Xray Inbound Generator
        </h1>
        <p class="text-sm text-gray-400 mt-2">
          Created by
          <a
            href="https://t.me/dailydigitalskills"
            target="_blank"
            class="text-purple-400 hover:text-purple-500"
          >
            Daily Digital Skills
          </a>
          (v 3.2)
        </p>
      </header>

      <!-- ساختار اصلی -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- پنل چپ: ورودی‌ها -->
        <div class="space-y-6">
          <!-- General Settings -->
          <section
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              General Settings
            </h3>
            <div class="space-y-4">
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Tag</label>
                <input
                  v-model="config.tag"
                  type="text"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                />
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Listen</label>
                <input
                  v-model="config.listen"
                  type="text"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                />
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Port</label>
                <div class="flex items-center gap-2">
                  <input
                    v-model="config.port"
                    type="number"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 flex-1"
                  />
                  <button
                    @click="generateRandomPort"
                    class="bg-purple-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-purple-600 transition-colors"
                    title="Generate Random Port"
                  >
                    <svg
                      class="w-5 h-5 text-white"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 3v3M12 18v3M3 12h3M18 12h3M15 9l2-2M15 15l2 2M9 9l-2-2M9 15l-2 2"
                      />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Protocol</label>
                <select
                  v-model="config.protocol"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                >
                  <option value="dokodemo-door">dokodemo-door</option>
                  <option value="vmess">VMESS</option>
                  <option value="vless">VLESS</option>
                  <option value="shadowsocks">Shadowsocks</option>
                  <option value="trojan">Trojan</option>
                  <option value="http">HTTP</option>
                  <option value="socks">SOCKS</option>
                  <option value="wireguard">Wireguard</option>
                </select>
              </div>
            </div>
          </section>

          <!-- Protocol Settings -->
          <section
            v-if="needsProtocolSettings"
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              Protocol Settings
            </h3>
            <div class="space-y-4">
              <div
                v-if="config.protocol === 'vless'"
                class="flex flex-col gap-1"
              >
                <label class="text-sm text-gray-400">Decryption</label>
                <select
                  v-model="config.settings.decryption"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 opacity-50 cursor-not-allowed"
                  disabled
                >
                  <option value="none">None</option>
                </select>
              </div>
              <div v-if="canUseFallbacks" class="space-y-4">
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">Enable Fallbacks</label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="isFallbacksEnabled"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
                <div
                  v-if="isFallbacksEnabled"
                  class="space-y-3 pl-4 border-l-2 border-gray-600"
                >
                  <div
                    v-for="(fallback, index) in fallbacks"
                    :key="index"
                    class="p-4 bg-gray-700 rounded-lg space-y-3"
                  >
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">SNI (Name)</label>
                      <input
                        v-model="fallback.name"
                        type="text"
                        class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                        placeholder="e.g., google.com"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">ALPN</label>
                      <input
                        v-model="fallback.alpn"
                        type="text"
                        class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                        placeholder="e.g., h2"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Path</label>
                      <input
                        v-model="fallback.path"
                        type="text"
                        class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                        placeholder="e.g., /path"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Dest</label>
                      <input
                        v-model="fallback.dest"
                        type="text"
                        class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                        placeholder="e.g., @something"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Xver</label>
                      <input
                        v-model="fallback.xver"
                        type="number"
                        class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                        placeholder="e.g., 1"
                      />
                    </div>
                    <button
                      @click="removeFallback(index)"
                      class="bg-red-500 px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm"
                    >
                      Remove
                    </button>
                  </div>
                  <button
                    @click="addFallback"
                    class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                  >
                    Add Fallback
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Stream Settings -->
          <section
            v-if="['dokodemo-door', 'shadowsocks', 'socks', 'http', 'wireguard'].indexOf(config.protocol) === -1"
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              Stream Settings
            </h3>
            <div class="space-y-4">
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Network</label>
                  <select
                    v-model="config.streamSettings.network"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                  >
                    <option
                      v-for="option in availableNetworkOptions"
                      :value="option"
                      :key="option"
                    >
                      {{ option }}
                    </option>
                  </select>
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Security</label>
                  <select
                    v-model="config.streamSettings.security"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    :disabled="config.streamSettings.network === 'kcp'"
                  >
                    <option
                      v-for="option in availableSecurityOptions"
                      :value="option"
                      :key="option"
                    >
                      {{ option }}
                    </option>
                  </select>
                </div>
              </div>

              <!-- TCP Settings -->
              <div
                v-if="config.streamSettings.network === 'tcp'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  TCP Settings
                </h4>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">
                    Accept Proxy Protocol
                  </label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="tcpSettings.acceptProxyProtocol"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">
                    Enable HTTP Obfuscation
                  </label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="isHttpObfuscationEnabled"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
                <div
                  v-if="isHttpObfuscationEnabled"
                  class="space-y-4 pl-4 border-l-2 border-gray-600"
                >
                  <div class="space-y-3">
                    <h5 class="text-md font-semibold text-gray-100">Request</h5>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Version</label>
                      <input
                        v-model="tcpSettings.header.request.version"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Method</label>
                      <input
                        v-model="tcpSettings.header.request.method"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">
                        Path (comma-separated)
                      </label>
                      <input
                        v-model="requestPath"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                        placeholder="e.g., /path1, /path2"
                      />
                    </div>
                    <div class="space-y-2">
                      <div
                        v-for="(header, index) in requestHeaders"
                        :key="index"
                        class="flex gap-2 items-center"
                      >
                        <input
                          v-model="header.name"
                          type="text"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                          placeholder="Header Name"
                        />
                        <input
                          v-model="header.value"
                          type="text"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                          placeholder="Value (comma-separated)"
                        />
                        <button
                          @click="removeRequestHeader(index)"
                          class="bg-red-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-red-600 transition-colors"
                        >
                          <span class="text-white">✕</span>
                        </button>
                      </div>
                      <button
                        @click="addRequestHeader"
                        class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                      >
                        Add Header
                      </button>
                    </div>
                  </div>
                  <div class="space-y-3">
                    <h5 class="text-md font-semibold text-gray-100">
                      Response
                    </h5>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Version</label>
                      <input
                        v-model="tcpSettings.header.response.version"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Status</label>
                      <input
                        v-model="tcpSettings.header.response.status"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Reason</label>
                      <input
                        v-model="tcpSettings.header.response.reason"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      />
                    </div>
                    <div class="space-y-2">
                      <div
                        v-for="(header, index) in responseHeaders"
                        :key="index"
                        class="flex gap-2 items-center"
                      >
                        <input
                          v-model="header.name"
                          type="text"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                          placeholder="Header Name"
                        />
                        <input
                          v-model="header.value"
                          type="text"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                          placeholder="Value (comma-separated)"
                        />
                        <button
                          @click="removeResponseHeader(index)"
                          class="bg-red-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-red-600 transition-colors"
                        >
                          <span class="text-white">✕</span>
                        </button>
                      </div>
                      <button
                        @click="addResponseHeader"
                        class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                      >
                        Add Header
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- WebSocket Settings -->
              <div
                v-if="config.streamSettings.network === 'ws'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  WebSocket Settings
                </h4>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Path</label>
                  <input
                    v-model="wsSettings.path"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                  />
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Host</label>
                  <input
                    v-model="wsSettings.host"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                  />
                </div>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">
                    Accept Proxy Protocol
                  </label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="wsSettings.acceptProxyProtocol"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
                <div class="space-y-2">
                  <h5 class="text-md font-semibold text-gray-100">Headers</h5>
                  <div
                    v-for="(header, index) in wsHeaders"
                    :key="index"
                    class="flex gap-2 items-center"
                  >
                    <input
                      v-model="header.name"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                      placeholder="Header Name"
                    />
                    <input
                      v-model="header.value"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                      placeholder="Value"
                    />
                    <button
                      @click="removeWsHeader(index)"
                      class="bg-red-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-red-600 transition-colors"
                    >
                      <span class="text-white">✕</span>
                    </button>
                  </div>
                  <button
                    @click="addWsHeader"
                    class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                  >
                    Add Header
                  </button>
                </div>
              </div>

              <!-- HTTP Upgrade Settings -->
              <div
                v-if="config.streamSettings.network === 'httpupgrade'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  HTTP Upgrade Settings
                </h4>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Path</label>
                  <input
                    v-model="httpupgradeSettings.path"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                  />
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Host</label>
                  <input
                    v-model="httpupgradeSettings.host"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                  />
                </div>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">
                    Accept Proxy Protocol
                  </label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="httpupgradeSettings.acceptProxyProtocol"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
                <div class="space-y-2">
                  <h5 class="text-md font-semibold text-gray-100">Headers</h5>
                  <div
                    v-for="(header, index) in httpupgradeHeaders"
                    :key="index"
                    class="flex gap-2 items-center"
                  >
                    <input
                      v-model="header.name"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                      placeholder="Header Name"
                    />
                    <input
                      v-model="header.value"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                      placeholder="Value"
                    />
                    <button
                      @click="removeHttpupgradeHeader(index)"
                      class="bg-red-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-red-600 transition-colors"
                    >
                      <span class="text-white">✕</span>
                    </button>
                  </div>
                  <button
                    @click="addHttpupgradeHeader"
                    class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                  >
                    Add Header
                  </button>
                </div>
              </div>

              <!-- SplitHTTP Settings -->
              <div
                v-if="config.streamSettings.network === 'splithttp'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  SplitHTTP Settings
                </h4>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Path</label>
                  <input
                    v-model="splithttpSettings.path"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                    placeholder="e.g., /"
                  />
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Host</label>
                  <input
                    v-model="splithttpSettings.host"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                    placeholder="e.g., example.com"
                  />
                </div>
                <div class="space-y-2">
                  <h5 class="text-md font-semibold text-gray-100">Headers</h5>
                  <div
                    v-for="(header, index) in splithttpHeaders"
                    :key="index"
                    class="flex gap-2 items-center"
                  >
                    <input
                      v-model="header.name"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                      placeholder="Header Name"
                    />
                    <input
                      v-model="header.value"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                      placeholder="Value"
                    />
                    <button
                      @click="removeSplithttpHeader(index)"
                      class="bg-red-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-red-600 transition-colors"
                    >
                      <span class="text-white">✕</span>
                    </button>
                  </div>
                  <button
                    @click="addSplithttpHeader"
                    class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                  >
                    Add Header
                  </button>
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">
                    Max Concurrent Posts (range)
                  </label>
                  <input
                    v-model="splithttpSettings.scMaxConcurrentPosts"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                    placeholder="e.g., 100-200"
                  />
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">
                    Max Each Post Bytes (range)
                  </label>
                  <input
                    v-model="splithttpSettings.scMaxEachPostBytes"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                    placeholder="e.g., 1000000-2000000"
                  />
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">
                    Min Posts Interval (ms, range)
                  </label>
                  <input
                    v-model="splithttpSettings.scMinPostsIntervalMs"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                    placeholder="e.g., 10-50"
                  />
                </div>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">No SSE Header</label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="splithttpSettings.noSSEHeader"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">
                    Padding Bytes (range)
                  </label>
                  <input
                    v-model="splithttpSettings.xPaddingBytes"
                    type="text"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                    placeholder="e.g., 100-1000"
                  />
                </div>
                <div class="space-y-2">
                  <h5 class="text-md font-semibold text-gray-100">
                    XMux Settings
                  </h5>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Max Concurrency (range)
                    </label>
                    <input
                      v-model="splithttpSettings.xmux.maxConcurrency"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 16-32"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Max Connections</label>
                    <input
                      v-model="splithttpSettings.xmux.maxConnections"
                      type="number"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 0"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Max Reuse Times (range)
                    </label>
                    <input
                      v-model="splithttpSettings.xmux.cMaxReuseTimes"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 64-128"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Max Lifetime (ms)
                    </label>
                    <input
                      v-model="splithttpSettings.xmux.cMaxLifetimeMs"
                      type="number"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 0"
                    />
                  </div>
                </div>
                <div class="flex flex-col gap-1">
                  <label class="text-sm text-gray-400">Mode</label>
                  <select
                    v-model="splithttpSettings.mode"
                    class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                  >
                    <option value="auto">Auto</option>
                    <option value="packet-up">Packet-Up</option>
                    <option value="stream-up">Stream-Up</option>
                  </select>
                </div>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">No gRPC Header</label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="splithttpSettings.noGRPCHeader"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
              </div>
              <!-- XHTTP Settings -->
              <div
                v-if="config.streamSettings.network === 'xhttp'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  XHTTP Settings
                </h4>
                <div class="space-y-4">
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Path</label>
                    <input
                      v-model="xhttpSettings.path"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., /path"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Host</label>
                    <input
                      v-model="xhttpSettings.host"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., hostname"
                    />
                  </div>
                  <div class="space-y-2">
                    <h5 class="text-md font-semibold text-gray-100">Headers</h5>
                    <div
                      v-for="(header, index) in xhttpHeaders"
                      :key="index"
                      class="flex gap-2 items-center"
                    >
                      <input
                        v-model="header.name"
                        type="text"
                        class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                        placeholder="Header Name"
                      />
                      <input
                        v-model="header.value"
                        type="text"
                        class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200 flex-1"
                        placeholder="Value"
                      />
                      <button
                        @click="removeXhttpHeader(index)"
                        class="bg-red-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-red-600 transition-colors"
                      >
                        <span class="text-white">✕</span>
                      </button>
                    </div>
                    <button
                      @click="addXhttpHeader"
                      class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                    >
                      Add Header
                    </button>
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Mode</label>
                    <select
                      v-model="xhttpSettings.mode"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    >
                      <option value="auto">Auto</option>
                      <option value="packet-up">Packet-Up</option>
                      <option value="stream-up">Stream-Up</option>
                      <option value="stream-one">Stream-One</option>
                    </select>
                  </div>
                  <!-- فیلدهای مشترک برای همه حالت‌ها -->
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Padding Bytes (range)
                    </label>
                    <input
                      v-model="xhttpSettings.xPaddingBytes"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 100-1000"
                    />
                  </div>
                  <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-100">No SSE Header</label>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        v-model="xhttpSettings.noSSEHeader"
                        class="sr-only peer"
                      />
                      <div
                        class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      ></div>
                    </label>
                  </div>

                  <!-- فیلدهای خاص برای packet-up -->
                  <div
                    v-if="xhttpSettings.mode === 'packet-up'"
                    class="space-y-4 pt-2 border-t border-gray-700"
                  >
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">
                        Max Buffered Upload
                      </label>
                      <input
                        v-model="xhttpSettings.scMaxBufferedPosts"
                        type="number"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                        placeholder="e.g., 30"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">
                        Max Upload Size (Byte)
                      </label>
                      <input
                        v-model="xhttpSettings.scMaxEachPostBytes"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                        placeholder="e.g., 1000000"
                      />
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">
                        Min Upload Interval (ms)
                      </label>
                      <input
                        v-model="xhttpSettings.scMinPostsIntervalMs"
                        type="number"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                        placeholder="e.g., 30"
                      />
                    </div>
                  </div>

                  <!-- فیلدهای خاص برای stream-up/stream-one -->
                  <div
                    v-if="['stream-up', 'stream-one'].includes(xhttpSettings.mode)"
                    class="space-y-4 pt-2 border-t border-gray-700"
                  >
                    <div class="flex items-center gap-2">
                      <label class="text-sm text-gray-100">
                        No gRPC Header
                      </label>
                      <label
                        class="relative inline-flex items-center cursor-pointer"
                      >
                        <input
                          type="checkbox"
                          v-model="xhttpSettings.noGRPCHeader"
                          class="sr-only peer"
                        />
                        <div
                          class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                        ></div>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <!-- gRPC Settings -->
              <div
                v-if="config.streamSettings.network === 'grpc'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  gRPC Settings
                </h4>
                <div class="space-y-4">
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Service Name</label>
                    <input
                      v-model="grpcSettings.serviceName"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., yourServiceName"
                    />
                  </div>
                  <!-- <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Authority</label>
                    <input
                      v-model="grpcSettings.authority"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., WriteIt"
                    />
                  </div> -->
                  <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-100">Multi Mode</label>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        v-model="grpcSettings.multiMode"
                        class="sr-only peer"
                      />
                      <div
                        class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      ></div>
                    </label>
                  </div>
                </div>
              </div>

              <!-- HTTP Settings -->
              <div
                v-if="config.streamSettings.network === 'http'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  HTTP Settings
                </h4>
                <div class="space-y-4">
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Path</label>
                    <input
                      v-model="httpSettings.path"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., /yourpath"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Host (comma-separated)
                    </label>
                    <input
                      v-model="httpSettings.hostInput"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., example1.com, example2.com"
                    />
                  </div>
                </div>
              </div>

              <!-- KCP Settings -->
              <div
                v-if="config.streamSettings.network === 'kcp'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  KCP Settings
                </h4>
                <div class="space-y-4">
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">MTU (576-1460)</label>
                    <input
                      v-model="kcpSettings.mtu"
                      type="number"
                      min="576"
                      max="1460"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="1350"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">TTI (10-100 ms)</label>
                    <input
                      v-model="kcpSettings.tti"
                      type="number"
                      min="10"
                      max="100"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="50"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Uplink Capacity (MB/s)
                    </label>
                    <input
                      v-model="kcpSettings.uplinkCapacity"
                      type="number"
                      min="0"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="5"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Downlink Capacity (MB/s)
                    </label>
                    <input
                      v-model="kcpSettings.downlinkCapacity"
                      type="number"
                      min="0"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="20"
                    />
                  </div>
                  <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-100">
                      Congestion Control
                    </label>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        v-model="kcpSettings.congestion"
                        class="sr-only peer"
                      />
                      <div
                        class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      ></div>
                    </label>
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Read Buffer Size (MB)
                    </label>
                    <input
                      v-model="kcpSettings.readBufferSize"
                      type="number"
                      min="1"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="2"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Write Buffer Size (MB)
                    </label>
                    <input
                      v-model="kcpSettings.writeBufferSize"
                      type="number"
                      min="1"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="2"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Header Type</label>
                    <select
                      v-model="kcpSettings.header.type"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    >
                      <option value="none">None</option>
                      <option value="srtp">SRTP</option>
                      <option value="utp">uTP</option>
                      <option value="wechat-video">WeChat Video</option>
                      <option value="dtls">DTLS</option>
                      <option value="wireguard">Wireguard</option>
                      <option value="dns">DNS</option>
                    </select>
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Header Domain</label>
                    <input
                      v-model="kcpSettings.header.domain"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="example.com"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Seed</label>
                    <input
                      v-model="kcpSettings.seed"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="Password"
                    />
                  </div>
                </div>
              </div>

              <!-- TLS Settings -->
              <div
                v-if="config.streamSettings.security === 'tls'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  TLS Settings
                </h4>
                <div class="space-y-4">
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Server Name</label>
                    <input
                      v-model="tlsSettings.serverName"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., example.com"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Min Version</label>
                    <input
                      v-model="tlsSettings.minVersion"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 1.0"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Max Version</label>
                    <input
                      v-model="tlsSettings.maxVersion"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 1.3"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Cipher Suites</label>
                    <input
                      v-model="tlsSettings.cipherSuites"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., suite1:suite2"
                    />
                  </div>
                  <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-100">
                      Reject Unknown SNI
                    </label>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        v-model="tlsSettings.rejectUnknownSni"
                        class="sr-only peer"
                      />
                      <div
                        class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      ></div>
                    </label>
                  </div>
                  <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-100">
                      Disable System Root
                    </label>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        v-model="tlsSettings.disableSystemRoot"
                        class="sr-only peer"
                      />
                      <div
                        class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      ></div>
                    </label>
                  </div>
                  <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-100">
                      Enable Session Resumption
                    </label>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        v-model="tlsSettings.enableSessionResumption"
                        class="sr-only peer"
                      />
                      <div
                        class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      ></div>
                    </label>
                  </div>
                  <div class="space-y-2">
                    <label class="text-sm text-gray-400">ALPN</label>
                    <div class="grid grid-cols-3 gap-2">
                      <label class="flex items-center gap-2">
                        <input
                          type="checkbox"
                          v-model="tlsSettings.alpn.h3"
                          class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                        />
                        <span class="text-sm text-gray-400">h3</span>
                      </label>
                      <label class="flex items-center gap-2">
                        <input
                          type="checkbox"
                          v-model="tlsSettings.alpn.h2"
                          class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                        />
                        <span class="text-sm text-gray-400">h2</span>
                      </label>
                      <label class="flex items-center gap-2">
                        <input
                          type="checkbox"
                          v-model="tlsSettings.alpn.http11"
                          class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                        />
                        <span class="text-sm text-gray-400">http/1.1</span>
                      </label>
                    </div>
                  </div>
                  <div class="space-y-2">
                    <h5 class="text-md font-semibold text-gray-100">
                      Certificates
                    </h5>
                    <div
                      v-for="(cert, index) in tlsSettings.certificates"
                      :key="index"
                      class="p-4 bg-gray-700 rounded-lg space-y-3"
                    >
                      <div class="flex flex-col gap-1">
                        <label class="text-sm text-gray-400">
                          Certificate File
                        </label>
                        <input
                          v-model="cert.certificateFile"
                          type="text"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                          placeholder="e.g., /path_to_key"
                        />
                      </div>
                      <div class="flex flex-col gap-1">
                        <label class="text-sm text-gray-400">Key File</label>
                        <input
                          v-model="cert.keyFile"
                          type="text"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                          placeholder="e.g., path_to_pvkey"
                        />
                      </div>
                      <div class="flex flex-col gap-1">
                        <label class="text-sm text-gray-400">
                          OCSP Stapling
                        </label>
                        <input
                          v-model="cert.ocspStapling"
                          type="number"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                          placeholder="e.g., 3600"
                        />
                      </div>
                      <div class="flex flex-col gap-1">
                        <label class="text-sm text-gray-400">Usage</label>
                        <select
                          v-model="cert.usage"
                          class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                        >
                          <option value="encipherment">Encipherment</option>
                          <option value="verify">Verify</option>
                          <option value="issue">Issue</option>
                        </select>
                      </div>
                      <div class="flex items-center gap-2">
                        <label class="text-sm text-gray-100">Build Chain</label>
                        <input
                          type="checkbox"
                          v-model="cert.buildChain"
                          class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                        />
                      </div>
                      <button
                        @click="removeCertificate(index)"
                        class="bg-red-500 px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm"
                      >
                        Remove
                      </button>
                    </div>
                    <button
                      @click="addCertificate"
                      class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                    >
                      Add Certificate
                    </button>
                  </div>
                  <div class="space-y-2">
                    <h5 class="text-md font-semibold text-gray-100">
                      Settings
                    </h5>
                    <div class="flex items-center gap-2">
                      <label class="text-sm text-gray-100">
                        Allow Insecure
                      </label>
                      <label
                        class="relative inline-flex items-center cursor-pointer"
                      >
                        <input
                          type="checkbox"
                          v-model="tlsSettings.settings.allowInsecure"
                          class="sr-only peer"
                        />
                        <div
                          class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                        ></div>
                      </label>
                    </div>
                    <div class="flex flex-col gap-1">
                      <label class="text-sm text-gray-400">Fingerprint</label>
                      <select
                        v-model="tlsSettings.settings.fingerprint"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      >
                        <option value="">None</option>
                        <option value="chrome">Chrome</option>
                        <option value="firefox">Firefox</option>
                        <option value="safari">Safari</option>
                        <option value="ios">iOS</option>
                        <option value="android">Android</option>
                        <option value="edge">Edge</option>
                        <option value="360">360</option>
                        <option value="qq">QQ</option>
                        <option value="random">Random</option>
                        <option value="randomized">Randomized</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Reality Settings -->
              <!-- Reality Settings -->
              <div
                v-if="config.streamSettings.security === 'reality'"
                class="space-y-4 pt-4 border-t border-gray-700"
              >
                <h4 class="text-lg font-semibold text-gray-100">
                  Reality Settings
                </h4>
                <div class="space-y-4">
                  <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-100">Show</label>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        v-model="realitySettings.show"
                        class="sr-only peer"
                      />
                      <div
                        class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      ></div>
                    </label>
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Destination</label>
                    <input
                      v-model="realitySettings.dest"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., example.com:443"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Xver</label>
                    <input
                      v-model="realitySettings.xver"
                      type="number"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., 0"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Server Names (comma-separated)
                    </label>
                    <input
                      v-model="realitySettings.serverNames"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., example.com,www.example.com"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Private Key</label>
                    <input
                      v-model="realitySettings.privateKey"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., aCFbiF8pXEyn-I7CvjyMGe0-3zMHUbuIjgJ6LuMg3To"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Public Key</label>
                    <input
                      v-model="realitySettings.publicKey"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., LaGTRJ1CJnnYV7FnyqQnU28I0xFTPFKI8xmUFwig5ic"
                    />
                  </div>
                  <!-- دکمه ساخت کلید X25519 (Reality) -->
                  <div class="flex items-center gap-2">
<button
  @click="generateRealityKeyPair"
  class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
>
  Generate X25519 Key Pair
</button>

                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Short IDs (comma-separated)</label>
                    <div class="flex items-center gap-2">
                      <input
                        v-model="realitySettings.shortIds"
                        type="text"
                        class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 flex-1"
                        placeholder="e.g., c410508e9721512b"
                      />
                      <button
                        @click="generateShortId"
                        class="bg-purple-500 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-purple-600 transition-colors"
                        title="Generate Short ID"
                      >
                        <svg
                          class="w-5 h-5 text-white"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M12 3v3M12 18v3M3 12h3M18 12h3M15 9l2-2M15 15l2 2M9 9l-2-2M9 15l-2 2"
                          />
                        </svg>
                      </button>
                    </div>
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">SpiderX</label>
                    <input
                      v-model="realitySettings.spiderX"
                      type="text"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                      placeholder="e.g., /"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      uTLS Fingerprint
                    </label>
                    <select
                      v-model="realitySettings.fingerprint"
                      class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    >
                      <option value="chrome">Chrome</option>
                      <option value="firefox">Firefox</option>
                      <option value="safari">Safari</option>
                      <option value="ios">iOS</option>
                      <option value="android">Android</option>
                      <option value="edge">Edge</option>
                      <option value="360">360</option>
                      <option value="random">Random</option>
                      <option value="randomized">Randomized</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Dokodemo-door Settings -->
          <section
            v-if="config.protocol === 'dokodemo-door'"
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              Dokodemo-door Settings
            </h3>
            <div class="space-y-4">
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Address</label>
                <input
                  v-model="config.settings.address"
                  type="text"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                />
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Port</label>
                <input
                  v-model="config.settings.port"
                  type="number"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                />
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Network</label>
                <select
                  v-model="config.settings.network"
                  multiple
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                >
                  <option value="tcp">TCP</option>
                  <option value="udp">UDP</option>
                </select>
              </div>
              <div class="flex items-center gap-2">
                <label class="text-sm text-gray-100">Follow Redirect</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    v-model="config.settings.followRedirect"
                    class="sr-only peer"
                  />
                  <div
                    class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                  ></div>
                </label>
              </div>
            </div>
          </section>

          <!-- Shadowsocks Settings -->
          <section
            v-if="config.protocol === 'shadowsocks'"
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              Shadowsocks Settings
            </h3>
            <div class="space-y-4">
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Method</label>
                <select
                  v-model="shadowsocksSettings.method"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                >
                  <option value="aes-256-gcm">AES_256_GCM</option>
                  <option value="aes-128-gcm">AES_128_GCM</option>
                  <option value="chacha20-poly1305">CHACHA20_POLY1305</option>
                  <option value="chacha20-ietf-poly1305">
                    CHACHA20_IETF_POLY1305
                  </option>
                  <option value="xchacha20-poly1305">XCHACHA20_POLY1305</option>
                  <option value="xchacha20-ietf-poly1305">
                    XCHACHA20_IETF_POLY1305
                  </option>
                  <option value="2022-blake3-aes-128-gcm">
                    BLAKE3_AES_128_GCM
                  </option>
                  <option value="2022-blake3-aes-256-gcm">
                    BLAKE3_AES_256_GCM
                  </option>
                  <option value="2022-blake3-chacha20-poly1305">
                    BLAKE3_CHACHA20_POLY1305
                  </option>
                </select>
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Password</label>
                <input
                  v-model="shadowsocksSettings.password"
                  type="text"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                  placeholder="e.g., 3F4W6f27iIIUaD91u3jGI16uL4sudZ1uykuhzFOmlAc="
                />
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Network</label>
                <select
                  v-model="shadowsocksSettings.network"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                >
                  <option value="tcp">tcp</option>
                  <option value="udp">udp</option>
                  <option value="tcp,udp">tcp,udp</option>
                </select>
              </div>
              <div class="flex items-center gap-2">
                <label class="text-sm text-gray-100">IV Check</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    v-model="shadowsocksSettings.ivCheck"
                    class="sr-only peer"
                  />
                  <div
                    class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                  ></div>
                </label>
              </div>
            </div>
          </section>

          <!-- SOCKS Settings -->
          <section
            v-if="config.protocol === 'socks'"
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              SOCKS Settings
            </h3>
            <div class="space-y-4">
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Auth</label>
                <select
                  v-model="socksSettings.auth"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                >
                  <option value="noauth">No Auth</option>
                  <option value="password">Password</option>
                </select>
              </div>
              <div v-if="socksSettings.auth === 'password'" class="space-y-3">
                <div
                  v-for="(account, index) in socksSettings.accounts"
                  :key="index"
                  class="p-4 bg-gray-700 rounded-lg space-y-3"
                >
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Username</label>
                    <input
                      v-model="account.user"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., username1"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Password</label>
                    <input
                      v-model="account.pass"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., password1"
                    />
                  </div>
                  <button
                    @click="removeSocksAccount(index)"
                    class="bg-red-500 px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm"
                  >
                    Remove
                  </button>
                </div>
                <button
                  @click="addSocksAccount"
                  class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                >
                  Add Account
                </button>
              </div>
              <div class="flex items-center gap-2">
                <label class="text-sm text-gray-100">UDP</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    v-model="socksSettings.udp"
                    class="sr-only peer"
                  />
                  <div
                    class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                  ></div>
                </label>
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">IP</label>
                <input
                  v-model="socksSettings.ip"
                  type="text"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200"
                  placeholder="e.g., 127.0.0.1"
                />
              </div>
            </div>
          </section>

          <!-- HTTP Settings -->
          <section
            v-if="config.protocol === 'http'"
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              HTTP Settings
            </h3>
            <div class="space-y-4">
              <div class="space-y-3">
                <div
                  v-for="(account, index) in httpProtocolSettings.accounts"
                  :key="index"
                  class="p-4 bg-gray-700 rounded-lg space-y-3"
                >
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Username</label>
                    <input
                      v-model="account.user"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., Enterusername1"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Password</label>
                    <input
                      v-model="account.pass"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., pass1"
                    />
                  </div>
                  <button
                    @click="removeHttpAccount(index)"
                    class="bg-red-500 px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm"
                  >
                    Remove
                  </button>
                </div>
                <button
                  @click="addHttpAccount"
                  class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                >
                  Add Account
                </button>
              </div>
              <div class="flex items-center gap-2">
                <label class="text-sm text-gray-100">Allow Transparent</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    v-model="httpProtocolSettings.allowTransparent"
                    class="sr-only peer"
                  />
                  <div
                    class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                  ></div>
                </label>
              </div>
            </div>
          </section>

          <!-- WireGuard Settings -->
          <section
            v-if="config.protocol === 'wireguard'"
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              WireGuard Settings
            </h3>
            <div class="space-y-4">
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">MTU</label>
                <input
                  v-model="wireguardSettings.mtu"
                  type="number"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                  placeholder="e.g., 1420"
                />
              </div>
              <div class="flex flex-col gap-1">
                <label class="text-sm text-gray-400">Secret Key</label>
                <input
                  v-model="wireguardSettings.secretKey"
                  type="text"
                  class="p-3 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500"
                  placeholder="e.g., sHbdow9HAufNxeyVj4fv1Rxmw8dFEkQ9PEENnTAlKVw="
                />
              </div>
              <div class="space-y-3">
                <h4 class="text-lg font-semibold text-gray-100">Peers</h4>
                <div
                  v-for="(peer, index) in wireguardSettings.peers"
                  :key="index"
                  class="p-4 bg-gray-700 rounded-lg space-y-3"
                >
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Private Key</label>
                    <input
                      v-model="peer.privateKey"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., KBsQIzwvEdbcM3x2FtKwzT3gJqZ/89TG+wnsLXIh028="
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Public Key</label>
                    <input
                      v-model="peer.publicKey"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., tpbBoo0+3u1opPYgyJKmGMAWwtqrtEjWQBKYZ96QARo="
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">Pre-Shared Key</label>
                    <input
                      v-model="peer.preSharedKey"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., jtXaJT4957ZU0QNVFqY5dBhto72IlBAyxObgC13DHts="
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Allowed IPs (comma-separated)
                    </label>
                    <input
                      v-model="peer.allowedIPsInput"
                      type="text"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., 10.0.0.2/32"
                    />
                  </div>
                  <div class="flex flex-col gap-1">
                    <label class="text-sm text-gray-400">
                      Keep Alive (seconds)
                    </label>
                    <input
                      v-model="peer.keepAlive"
                      type="number"
                      class="p-3 rounded-lg bg-gray-600 border border-gray-500 text-gray-200"
                      placeholder="e.g., 0"
                    />
                  </div>
                  <button
                    @click="removeWireguardPeer(index)"
                    class="bg-red-500 px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm"
                  >
                    Remove Peer
                  </button>
                </div>
                <button
                  @click="addWireguardPeer"
                  class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                >
                  Add Peer
                </button>
              </div>
              <div class="flex items-center gap-2">
                <label class="text-sm text-gray-100">No Kernel TUN</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    v-model="wireguardSettings.noKernelTun"
                    class="sr-only peer"
                  />
                  <div
                    class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                  ></div>
                </label>
              </div>
            </div>
          </section>
          <!-- Sniffing Settings -->
          <section
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
          >
            <h3 class="text-xl font-semibold text-gray-100 mb-4">
              Sniffing Settings
            </h3>
            <div class="space-y-4">
              <div class="flex items-center gap-2">
                <label class="text-sm text-gray-100">Enabled</label>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    v-model="sniffingEnabled"
                    class="sr-only peer"
                  />
                  <div
                    class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                  ></div>
                </label>
              </div>
              <div
                class="space-y-2"
                :class="{ 'opacity-50 pointer-events-none': !sniffingEnabled }"
              >
                <label class="text-sm text-gray-400">Dest Override</label>
                <!-- ادامه Sniffing Settings -->
                <div class="grid grid-cols-2 gap-2">
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      v-model="destOverride.http"
                      class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                    />
                    <span class="text-sm text-gray-400">HTTP</span>
                  </label>
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      v-model="destOverride.tls"
                      class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                    />
                    <span class="text-sm text-gray-400">TLS</span>
                  </label>
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      v-model="destOverride.quic"
                      class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                    />
                    <span class="text-sm text-gray-400">QUIC</span>
                  </label>
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      v-model="destOverride.fakedns"
                      class="h-4 w-4 text-purple-500 bg-gray-700 border-gray-600 rounded focus:ring-purple-500"
                    />
                    <span class="text-sm text-gray-400">FakeDNS</span>
                  </label>
                </div>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">Metadata Only</label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="sniffingMetadataOnly"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
                <div class="flex items-center gap-2">
                  <label class="text-sm text-gray-100">Route Only</label>
                  <label
                    class="relative inline-flex items-center cursor-pointer"
                  >
                    <input
                      type="checkbox"
                      v-model="sniffingRouteOnly"
                      class="sr-only peer"
                    />
                    <div
                      class="w-10 h-5 bg-gray-600 rounded-full peer peer-checked:bg-purple-500 peer-checked:after:translate-x-5 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                    ></div>
                  </label>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- پنل راست: خروجی JSON -->
        <div
          class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700 fade-in"
        >
          <h2 class="text-2xl font-bold text-gray-100 mb-4">JSON Output</h2>
          <pre
            class="bg-gray-900 p-4 rounded-lg text-gray-300 text-sm overflow-auto max-h-[400px] border border-gray-700 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800"
          >
        {{ generatedConfig }}</pre
          >
          <div class="flex gap-4 mt-4 flex-wrap">
            <button
              @click="copyToClipboard"
              class="bg-purple-500 px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                ></path>
              </svg>
              Copy
            </button>
            <button
              @click="downloadJSON"
              class="bg-green-500 px-4 py-2 rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                ></path>
              </svg>
              Download JSON
            </button>
            <button
              @click="importFromClipboard"
              class="bg-blue-500 px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm flex items-center gap-2"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                ></path>
              </svg>
              Import from Clipboard
            </button>
            <label
              class="bg-sky-600 px-4 py-2 rounded-lg hover:bg-sky-00 transition-colors text-sm flex items-center gap-2 cursor-pointer"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                ></path>
              </svg>
              Import from File
              <input
                type="file"
                accept=".json"
                @change="importFromFile"
                class="hidden"
              />
            </label>
          </div>

<div class="mt-6 pt-6 border-t border-gray-700">
      <h3 class="text-xl font-semibold text-purple-400 mb-3 text-left" dir="ltr">Sponsored Content</h3>
  <!-- اسپانسر -->
  <div id="sponsor-content" class="bg-gray-800 text-white p-6 rounded-lg shadow-lg max-w-md mx-auto mt-6 font-vazir" dir="rtl">

    <img src="https://i.ibb.co/whvXKy4z/photo-2025-07-09-11-48-19.jpg" alt="Sponsor Banner" class="max-w-64 mx-auto h-auto rounded-md mb-4" />
    <h2 class="text-l font-bold mb-4 text-center">🌟 نمایندگی پنل مرزبان</h2>
    <ul class="text-sm list-disc list-inside mb-4 space-y-2 text-right">
      <li>⚡️ پنل مجهز با کانفیگ‌های متنوع تک‌لوکیشن 🇩🇪</li>
      <li>✅ مناسب برای همه اپراتورها 🟢🟣</li>
      <li>📱 سازگار با همه دستگاه‌ها 🍎🤖</li>
      <li>🚀 بدون قطعی و افت سرعت</li>
      <li>🌐 آی‌پی ثابت، تمیز و بدون نشتی</li>
      <li>🏪 پشتیبانی کامل و حرفه‌ای</li>
    </ul>
    <p class="text-sm mb-2 text-right">🔥 فقط روی فروش تمرکز کن! 🚀</p>
    <p class="text-sm text-yellow-300 mb-4 text-right">⚠️ سفارش فقط برای فروش بالای ۳ ترابایت ماهانه پذیرفته می‌شود.</p>
    <div class="text-center">
      <a
        href="https://t.me/OpVPNsupport"
        target="_blank"
        class="inline-block bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"
      >
        🛒 برای خرید کلیک کنید
      </a>
    </div>
    <p class="text-sm mt-4 text-center">
      <a href="https://t.me/EasyTunnel1" target="_blank" class="text-blue-300 hover:underline">EasyTunnel1</a> | 
      <a href="https://t.me/OpVPNsupport" target="_blank" class="text-blue-300 hover:underline">پشتیبانی ✔️</a>
    </p>
  </div>
  <!-- بخش دونیت و شبکه‌های اجتماعی -->
  <div class="mt-6 pt-6 border-t border-gray-700">
    <h3 class="text-xl font-semibold text-purple-400 mb-3" dir="ltr">Support Us with a Donation</h3>
    <p class="text-sm text-gray-300 mb-4">
      If you enjoy this tool, with a small donation you can give us a cup of coffee and motivate us to get better! ☕❤️
    </p>
    <!-- آدرس‌های کیف پول -->
    <div class="space-y-3">
      <div v-for="(wallet, index) in wallets" :key="index" class="flex items-center gap-2">
        <div class="flex-1">
          <label class="text-xs text-gray-400">{{ wallet.name }}</label>
          <input
            :value="wallet.address"
            type="text"
            readonly
            class="w-full p-2 rounded-lg bg-gray-700 border border-gray-600 text-gray-200 text-xs truncate"
          />
        </div>
        <button
          @click="copyWalletAddress(wallet.address)"
          class="bg-purple-500 w-8 h-8 flex items-center justify-center rounded-lg hover:bg-purple-600 transition-colors"
          title="Copy Address"
        >
          <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
            ></path>
          </svg>
        </button>
      </div>
    </div>
    <!-- دکمه‌های شبکه‌های اجتماعی -->
    <div class="mt-4 flex flex-wrap gap-2">
      <a
        href="https://github.com/azavaxhuman/"
        target="_blank"
        class="bg-gray-700 px-3 py-1 rounded-lg hover:bg-gray-600 transition-colors text-sm text-gray-200 flex items-center gap-1"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
          ></path>
        </svg>
        GitHub
      </a>
      <a
        href="https://youtube.com/@dailydigitalskills"
        target="_blank"
        class="bg-red-600 px-3 py-1 rounded-lg hover:bg-red-700 transition-colors text-sm text-white flex items-center gap-1"
      >
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M23.5 6.2a3 3 0 00-2.1-2.1C19.4 3.5 12 3.5 12 3.5s-7.4 0-9.4.6a3 3 0 00-2.1 2.1C0 8.1 0 12 0 12s0 3.9.6 5.8a3 3 0 002.1 2.1c2 .6 9.4.6 9.4.6s7.4 0 9.4-.6a3 3 0 002.1-2.1c.6-1.9.6-5.8.6-5.8s0-3.9-.6-5.8zM9.8 15.5V8.5l6.2 3.5-6.2 3.5z"
          ></path>
        </svg>
        YouTube
      </a>
      <a
        href="https://t.me/dailydigitalskills"
        target="_blank"
        class="bg-blue-500 px-3 py-1 rounded-lg hover:bg-blue-600 transition-colors text-sm text-white flex items-center gap-1"
      >
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.587 5.82l-1.85 8.73c-.13.614-.497.765-.84.48l-2.73-2.01-1.32 1.275c-.146.14-.27.256-.556.256l.195-2.79 5.07-4.586c.223-.2-.05-.313-.343-.11L8.73 10.65l-2.626-.81c-.59-.182-.603-.59.123-.885l10.23-3.94c.492-.19.925.11.856.805z"
          ></path>
        </svg>
        Telegram
      </a>
    </div>
  </div>
</div>
  <!-- قبل از بسته شدن تگ </body> -->
  <script src="./nacl.min.js"></script>
  <script src="./app.js"></script>
</body>
</html>
